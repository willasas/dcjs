<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TypeScript版本测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-result {
            margin-top: 10px;
            padding: 10px;
            background-color: #f5f5f5;
            border-radius: 3px;
        }
        .progress-container {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>TypeScript版本测试</h1>

    <div class="test-section">
        <h2>DC.Array 测试</h2>
        <button id="testArray">测试数组方法</button>
        <div id="arrayResult" class="test-result"></div>
    </div>

    <div class="test-section">
        <h2>DC.String 测试</h2>
        <button id="testString">测试字符串方法</button>
        <div id="stringResult" class="test-result"></div>
    </div>

    <div class="test-section">
        <h2>DC.ProgressBar 测试</h2>
        <div id="progress-container" class="progress-container"></div>
        <button id="createProgress">创建进度条</button>
        <button id="updateProgress">更新进度条</button>
        <div id="progressResult" class="test-result"></div>
    </div>

    <!-- 引入TypeScript版本 -->
    <script src="../dist/dc-1.0.0-2026-01-07-ts.js"></script>

    <script>
        // 测试DC.Array
        document.getElementById('testArray').addEventListener('click', function() {
            try {
                const testArray = [1, 2, 3, 4, 5, 3, 2, 1];
                const uniqueArray = DC.Array.unique(testArray);
                const chunkedArray = DC.Array.chunk(testArray, 3);
                const shuffledArray = DC.Array.shuffle(testArray);

                document.getElementById('arrayResult').innerHTML =
                    `<p>原始数组: [${testArray.join(', ')}]</p>
                     <p>去重后: [${uniqueArray.join(', ')}]</p>
                     <p>分块(3): ${JSON.stringify(chunkedArray)}</p>
                     <p>随机排序: [${shuffledArray.join(', ')}]</p>`;
            } catch (error) {
                document.getElementById('arrayResult').innerHTML = `<p style="color: red;">错误: ${error.message}</p>`;
            }
        });

        // 测试DC.String
        document.getElementById('testString').addEventListener('click', function() {
            try {
                const testString = 'hello world';
                const capitalized = DC.String.capitalize(testString);
                const camelCase = DC.String.camelCase('hello world test');
                const kebabCase = DC.String.kebabCase('HelloWorldTest');
                const truncated = DC.String.truncate('This is a very long string that needs to be truncated', 20);

                document.getElementById('stringResult').innerHTML =
                    `<p>原始字符串: "${testString}"</p>
                     <p>首字母大写: "${capitalized}"</p>
                     <p>驼峰命名: "${camelCase}"</p>
                     <p>短横线命名: "${kebabCase}"</p>
                     <p>截断: "${truncated}"</p>`;
            } catch (error) {
                document.getElementById('stringResult').innerHTML = `<p style="color: red;">错误: ${error.message}</p>`;
            }
        });

        // 测试DC.ProgressBar
        let progressBar = null;

        document.getElementById('createProgress').addEventListener('click', function() {
            try {
                const container = document.getElementById('progress-container');
                container.innerHTML = ''; // 清空容器

                progressBar = new DC.ProgressBar(container, {
                    value: 30,
                    max: 100,
                    showText: true,
                    color: '#4CAF50'
                });

                document.getElementById('progressResult').innerHTML = '<p style="color: green;">进度条创建成功！</p>';
            } catch (error) {
                document.getElementById('progressResult').innerHTML = `<p style="color: red;">错误: ${error.message}</p>`;
            }
        });

        document.getElementById('updateProgress').addEventListener('click', function() {
            try {
                if (progressBar) {
                    const currentValue = progressBar.getValue();
                    const newValue = currentValue >= 100 ? 0 : currentValue + 10;
                    progressBar.setValue(newValue);

                    document.getElementById('progressResult').innerHTML = `<p>进度条值更新为: ${newValue}%</p>`;
                } else {
                    document.getElementById('progressResult').innerHTML = '<p style="color: orange;">请先创建进度条！</p>';
                }
            } catch (error) {
                document.getElementById('progressResult').innerHTML = `<p style="color: red;">错误: ${error.message}</p>`;
            }
        });
    </script>
</body>
</html>